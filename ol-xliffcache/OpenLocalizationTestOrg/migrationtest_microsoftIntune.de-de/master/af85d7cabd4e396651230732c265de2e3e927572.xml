{
  "nodes": [
    {
      "content": "MD Conversion - Prepare Android apps for mobile application management with the Microsoft Intune App Wrapping Tool",
      "pos": [
        11,
        125
      ]
    },
    {
      "content": "MD Conversion - Prepare Android apps for mobile application management with the Microsoft Intune App Wrapping Tool",
      "pos": [
        260,
        374
      ]
    },
    {
      "pos": [
        375,
        573
      ],
      "content": "Use the <bpt id=\"p1\">**</bpt>Microsoft Intune App Wrapping Tool for Android<ept id=\"p1\">**</ept> to modify the behavior of your in-house Android apps to let you configure features of the app without modifying the code of the app itself."
    },
    {
      "content": "The tool is a Windows command line application that runs in PowerShell and creates a ‘wrapper’ around your app.",
      "pos": [
        575,
        686
      ]
    },
    {
      "content": "Once the app is processed, you can then change the app’s functionality using an <ph id=\"ph1\">[!INCLUDE[wit_nextref](../Token/wit_nextref_md.md)]</ph> mobile application management policy (see <bpt id=\"p1\">[</bpt>Configure and deploy mobile application management policies in the Microsoft Intune console<ept id=\"p1\">](../Topic/Configure-and-deploy-mobile-application-management-policies-in-the-Microsoft-Intune-console.md)</ept>).",
      "pos": [
        687,
        1061
      ]
    },
    {
      "content": "If your app is using the Azure Active Directory Authentication Library (ADAL), you must complete the steps in <bpt id=\"p1\">[</bpt>How to wrap apps that use the Azure Active Directory Library (ADAL)<ept id=\"p1\">](#BKMK_ADAL_android)</ept> before you wrap your app.",
      "pos": [
        1063,
        1288
      ]
    },
    {
      "content": "If you are unsure if your app uses this library, contact the developer of the app.",
      "pos": [
        1289,
        1371
      ]
    },
    {
      "content": "Before running the tool, review the <bpt id=\"p1\">[</bpt>Security considerations for running the app wrapping tool<ept id=\"p1\">](../Topic/Prepare-Android-apps-for-mobile-application-management-with-the-Microsoft-Intune-App-Wrapping-Tool.md#BKMK_androidappwraptool)</ept>.",
      "pos": [
        1373,
        1605
      ]
    },
    {
      "content": "To download the tool, see <bpt id=\"p1\">[</bpt>Microsoft Intune App Wrapping Tool for Android<ept id=\"p1\">](http://www.microsoft.com/en-us/download/details.aspx?id=47267)</ept>.",
      "pos": [
        1606,
        1744
      ]
    },
    {
      "content": "Step 1: Fulfill the prerequisites for using the app wrapping tool",
      "pos": [
        1749,
        1814
      ]
    },
    {
      "content": "You must run the app wrapping tool on a Windows computer running Windows 7 or later.",
      "pos": [
        1820,
        1904
      ]
    },
    {
      "pos": [
        1910,
        2006
      ],
      "content": "Your input app must be a valid Android application package with the extension <bpt id=\"p1\">**</bpt>.apk<ept id=\"p1\">**</ept> file and:"
    },
    {
      "content": "Cannot be encrypted",
      "pos": [
        2016,
        2035
      ]
    },
    {
      "content": "Must not have already been wrapped by the app wrapping tool",
      "pos": [
        2045,
        2104
      ]
    },
    {
      "content": "Must be written for Android 4.0 or later",
      "pos": [
        2114,
        2154
      ]
    },
    {
      "content": "The app must be developed by, or for your company.",
      "pos": [
        2160,
        2210
      ]
    },
    {
      "content": "You cannot use this tool to process apps downloaded from the Google Play Store.",
      "pos": [
        2211,
        2290
      ]
    },
    {
      "content": "To run the app wrapping tool, you must install the latest version of the <bpt id=\"p1\">[</bpt>Java Runtime Environment<ept id=\"p1\">](http://java.com/download/)</ept> and then ensure that the Java path variable has been set to <bpt id=\"p2\">**</bpt>C:\\ProgramData\\Oracle\\Java\\javapath<ept id=\"p2\">**</ept> in your Windows environment variables.",
      "pos": [
        2296,
        2561
      ]
    },
    {
      "content": "For more help, see your <bpt id=\"p1\">[</bpt>Java documentation<ept id=\"p1\">](http://java.com/download/help/)</ept>.",
      "pos": [
        2562,
        2639
      ]
    },
    {
      "pos": [
        2647,
        2789
      ],
      "content": "[!NOTE]\nIn some cases, the 32-bit version of Java may result in memory issues. We recommend that you install the 64-bit version instead.",
      "leadings": [
        "",
        "    > "
      ],
      "nodes": [
        {
          "content": "In some cases, the 32-bit version of Java may result in memory issues. We recommend that you install the 64-bit version instead.",
          "pos": [
            8,
            136
          ],
          "nodes": [
            {
              "content": "In some cases, the 32-bit version of Java may result in memory issues.",
              "pos": [
                0,
                70
              ]
            },
            {
              "content": "We recommend that you install the 64-bit version instead.",
              "pos": [
                71,
                128
              ]
            }
          ]
        }
      ]
    },
    {
      "content": "Step 2: Install the App Wrapping Tool",
      "pos": [
        2794,
        2831
      ]
    },
    {
      "content": "Install the app wrapping tool",
      "pos": [
        2838,
        2867
      ]
    },
    {
      "content": "From the Microsoft Download Center, download and open the installation file for the app wrapping tool to a Windows computer.",
      "pos": [
        2873,
        2997
      ]
    },
    {
      "content": "Accept the license agreement, then complete the installation.",
      "pos": [
        3003,
        3064
      ]
    },
    {
      "content": "Note the folder to which you installed the tool.",
      "pos": [
        3066,
        3114
      ]
    },
    {
      "content": "The default location is: <bpt id=\"p1\">**</bpt>C:\\Program Files (x86)\\Microsoft Intune Mobile Application Management\\Android\\App Wrapping Tool<ept id=\"p1\">**</ept>.",
      "pos": [
        3115,
        3240
      ]
    },
    {
      "content": "Step 3: Run the App Wrapping Tool",
      "pos": [
        3245,
        3278
      ]
    },
    {
      "content": "On the Windows computer where you installed the app wrapping tool, open a PowerShell window.",
      "pos": [
        3284,
        3376
      ]
    },
    {
      "content": "From the folder where you installed the tool, import the app wrapping tool PowerShell module:",
      "pos": [
        3382,
        3475
      ]
    },
    {
      "content": "Run the tool by using the <bpt id=\"p1\">**</bpt>invoke-AppWrappingTool<ept id=\"p1\">**</ept> command together with the following parameters.",
      "pos": [
        3545,
        3645
      ]
    },
    {
      "content": "Parameters that are marked as \"optional\" are for apps that use Azure Active Directory Library (ADAL).",
      "pos": [
        3646,
        3747
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>How to wrap apps that use the Azure Active Directory Library (ADAL)<ept id=\"p1\">](#BKMK_ADAL_android)</ept>.",
      "pos": [
        3748,
        3864
      ]
    },
    {
      "content": "Parameter",
      "pos": [
        3871,
        3880
      ]
    },
    {
      "content": "More information",
      "pos": [
        3881,
        3897
      ]
    },
    {
      "pos": [
        3945,
        3975
      ],
      "content": "<bpt id=\"p1\">**</bpt>-InputPath<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>&amp;lt;String&amp;gt;<ept id=\"p2\">*</ept>"
    },
    {
      "content": "Path of the source Android app (.apk).",
      "pos": [
        3976,
        4014
      ]
    },
    {
      "pos": [
        4021,
        4052
      ],
      "content": "<bpt id=\"p1\">**</bpt>-OutputPath<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>&amp;lt;String&amp;gt;<ept id=\"p2\">*</ept>"
    },
    {
      "content": "Path to the \"output\" Android app.",
      "pos": [
        4053,
        4086
      ]
    },
    {
      "content": "If this is the same directory path as InputPath, the packaging will fail.",
      "pos": [
        4087,
        4160
      ]
    },
    {
      "pos": [
        4167,
        4200
      ],
      "content": "<bpt id=\"p1\">**</bpt>-KeyStorePath<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>&amp;lt;String&amp;gt;<ept id=\"p2\">*</ept>"
    },
    {
      "content": "Path to the keystore file that contains the public/private key pair for signing.",
      "pos": [
        4201,
        4281
      ]
    },
    {
      "pos": [
        4288,
        4331
      ],
      "content": "<bpt id=\"p1\">**</bpt>-KeyStorePassword<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>&amp;lt;SecureString&amp;gt;<ept id=\"p2\">*</ept>"
    },
    {
      "content": "Password used to decrypt the keystore.",
      "pos": [
        4332,
        4370
      ]
    },
    {
      "pos": [
        4377,
        4406
      ],
      "content": "<bpt id=\"p1\">**</bpt>-KeyAlias<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>&amp;lt;String&amp;gt;<ept id=\"p2\">*</ept>"
    },
    {
      "content": "Name of the key to be used for signing.",
      "pos": [
        4407,
        4446
      ]
    },
    {
      "pos": [
        4453,
        4491
      ],
      "content": "<bpt id=\"p1\">**</bpt>-KeyPassword<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>&amp;lt;SecureString&amp;gt;<ept id=\"p2\">*</ept>"
    },
    {
      "content": "Password used to decrypt the private key that will be used for signing.",
      "pos": [
        4492,
        4563
      ]
    },
    {
      "pos": [
        4570,
        4603
      ],
      "content": "<bpt id=\"p1\">**</bpt>-SigAlg<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>&amp;lt;SecureString&amp;gt;<ept id=\"p2\">*</ept>"
    },
    {
      "content": "Name of the signature algorithm to be used for signing.",
      "pos": [
        4604,
        4659
      ]
    },
    {
      "content": "The algorithm must be compatible with the private key.",
      "pos": [
        4660,
        4714
      ]
    },
    {
      "content": "Examples: SHA256withRSA, SHA1withRSA, MD5withRSA",
      "pos": [
        4726,
        4774
      ]
    },
    {
      "pos": [
        4781,
        4808
      ],
      "content": "<bpt id=\"p1\">**</bpt>-ClientID<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>&amp;lt;GUID&amp;gt;<ept id=\"p2\">*</ept>"
    },
    {
      "content": "Azure Active Directory Client ID of the input app (optional).",
      "pos": [
        4809,
        4870
      ]
    },
    {
      "pos": [
        4877,
        4907
      ],
      "content": "<bpt id=\"p1\">**</bpt>-AuthorityURI<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>&amp;lt;Uri&amp;gt;<ept id=\"p2\">*</ept>"
    },
    {
      "content": "Azure Active Directory Authority URI of the input app (optional).",
      "pos": [
        4908,
        4973
      ]
    },
    {
      "pos": [
        4980,
        5012
      ],
      "content": "<bpt id=\"p1\">**</bpt>-SkipBroker<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>&amp;lt;Boolean&amp;gt;<ept id=\"p2\">*</ept>"
    },
    {
      "content": "Indicates whether the input application supports device-wide brokered single sign-on (optional).",
      "pos": [
        5013,
        5109
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>True<ept id=\"p1\">**</ept> - the input application does not support device-wide brokered single sign-on.",
      "pos": [
        5121,
        5207
      ]
    },
    {
      "content": "Use the NonBrokerRedirectURI parameter.",
      "pos": [
        5208,
        5247
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>False<ept id=\"p1\">**</ept> - the input application supports device-wide brokered single sign-on",
      "pos": [
        5259,
        5337
      ]
    },
    {
      "pos": [
        5344,
        5382
      ],
      "content": "<bpt id=\"p1\">**</bpt>-NonBrokerRedirectURI<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>&amp;lt;URI&amp;gt;<ept id=\"p2\">*</ept>"
    },
    {
      "content": "Azure Active Directory Redirect URI to use if SkipBroker is true (optional).",
      "pos": [
        5383,
        5459
      ]
    },
    {
      "content": "&amp;lt;CommonParameters&amp;gt;",
      "pos": [
        5467,
        5491
      ]
    },
    {
      "content": "(optional – supports common PowerShell parameters such as verbose, debug, etc.)",
      "pos": [
        5493,
        5572
      ]
    },
    {
      "content": "For a list of common parameters, see the <bpt id=\"p1\">[</bpt>Microsoft Script Center<ept id=\"p1\">](https://technet.microsoft.com/library/hh847884.aspx)</ept>.",
      "pos": [
        5584,
        5704
      ]
    },
    {
      "content": "To see help for the tool, enter the command:",
      "pos": [
        5710,
        5754
      ]
    },
    {
      "pos": [
        5808,
        5937
      ],
      "content": "To find out more about Azure Active Directory (AAD) integration, see <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](https://technet.microsoft.com/library/dn878028.aspx)</ept>."
    },
    {
      "content": "Example:",
      "pos": [
        5945,
        5953
      ]
    },
    {
      "pos": [
        6454,
        6529
      ],
      "content": "You will then be prompted for the <bpt id=\"p1\">**</bpt>KeyStorePassword<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>KeyPassword<ept id=\"p2\">**</ept>."
    },
    {
      "content": "The wrapped app is generated, and saved, along with a log file, in the output path you specified.",
      "pos": [
        6531,
        6628
      ]
    },
    {
      "pos": [
        6633,
        6728
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"BKMK_androidappwraptool\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Security considerations for running the app wrapping tool"
    },
    {
      "content": "To prevent potential spoofing, information disclosure, and elevation of privilege attacks:",
      "pos": [
        6729,
        6819
      ]
    },
    {
      "content": "Ensure that the input line-of-business application, output application, and Java KeyStore are on the same computer where the app wrapping tool is running.",
      "pos": [
        6825,
        6979
      ]
    },
    {
      "content": "Import the output application to the Intune Console on the same computer where the tool is running.",
      "pos": [
        6985,
        7084
      ]
    },
    {
      "pos": [
        7090,
        7456
      ],
      "content": "If the output application and the tool are on a Universal Naming Convention (UNC) path and you are not running the tool and input files on the same computer, configure the environment to be secure by using <bpt id=\"p1\">[</bpt>Internet Protocol Security (IPsec)<ept id=\"p1\">](http://en.wikipedia.org/wiki/IPsec)</ept> or <bpt id=\"p2\">[</bpt>Server Message Block (SMB) signing<ept id=\"p2\">](https://support.microsoft.com/en-us/kb/887429)</ept>."
    },
    {
      "content": "Ensure that the application is coming from a trusted source, especially if you are using Azure Active Directory (AAD), which might enable the application to access the AAD token during runtime.",
      "pos": [
        7462,
        7655
      ]
    },
    {
      "content": "Secure the output directory that contains the wrapped app.",
      "pos": [
        7661,
        7719
      ]
    },
    {
      "content": "Consider using a user-level directory for the output.",
      "pos": [
        7720,
        7773
      ]
    },
    {
      "pos": [
        7778,
        7877
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"BKMK_ADAL_android\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to wrap apps that use the Azure Active Directory Library (ADAL)"
    },
    {
      "content": "If your app is using the Azure Active Directory Authentication Library (ADAL), you must complete these steps before you wrap your app.",
      "pos": [
        7878,
        8012
      ]
    },
    {
      "content": "Step 1: Ensure that you meet the requirements for ADAL",
      "pos": [
        8018,
        8072
      ]
    },
    {
      "content": "For apps that use ADAL, the following must be true:",
      "pos": [
        8073,
        8124
      ]
    },
    {
      "content": "The app must incorporate an ADAL version greater than or equal to 1.0.2.",
      "pos": [
        8130,
        8202
      ]
    },
    {
      "pos": [
        8208,
        8421
      ],
      "content": "The developer must <bpt id=\"p1\">[</bpt>grant their app access to the Intune Mobile Application Management resource<ept id=\"p1\">](../Topic/Prepare-iOS-apps-for-mobile-application-management-with-the-Microsoft-Intune-App-Wrapping-Tool.md#BKMK_AD)</ept>."
    },
    {
      "pos": [
        8427,
        8534
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"BKMK_review_IDs\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Step 2: Review the identifiers that you need to get when you register the app"
    },
    {
      "content": "In the next step, you will use the Azure management portal to register your apps (which are using  ADAL with Azure Active Directory (AAD)) to get the unique identifiers listed in the following table.",
      "pos": [
        8535,
        8734
      ]
    },
    {
      "content": "You then give the identifiers to the developer when you integrate ADAL with the app.",
      "pos": [
        8735,
        8819
      ]
    },
    {
      "content": "For more information about these identifier values, see <bpt id=\"p1\">[</bpt>Microsoft Azure Active Directory Authentication Library (ADAL) for Android<ept id=\"p1\">](https://github.com/AzureAD/azure-activedirectory-library-for-android/blob/master/README.md)</ept>.",
      "pos": [
        8820,
        9045
      ]
    },
    {
      "content": "Identifier",
      "pos": [
        9048,
        9058
      ]
    },
    {
      "content": "More information",
      "pos": [
        9059,
        9075
      ]
    },
    {
      "content": "Default value",
      "pos": [
        9076,
        9089
      ]
    },
    {
      "content": "Client ID",
      "pos": [
        9150,
        9159
      ]
    },
    {
      "content": "A unique GUID identifier that is generated for the app after it is registered with AAD.",
      "pos": [
        9162,
        9249
      ]
    },
    {
      "content": "If you know the app's Client ID, specify that value.",
      "pos": [
        9261,
        9313
      ]
    },
    {
      "content": "Otherwise, use the default value.",
      "pos": [
        9314,
        9347
      ]
    },
    {
      "content": "6c7e8096-f593-4d72-807f-a5f86dcc9c77",
      "pos": [
        9348,
        9384
      ]
    },
    {
      "content": "Authority URI",
      "pos": [
        9389,
        9402
      ]
    },
    {
      "content": "The authority Uniform Resource Identifier (URI) value for AAD) objects (for example, users and groups).",
      "pos": [
        9405,
        9508
      ]
    },
    {
      "content": "The AuthorityURI parameter is optional for the app wrapping tool.",
      "pos": [
        9520,
        9585
      ]
    },
    {
      "content": "The default URI is used if you don't use the parameter.",
      "pos": [
        9586,
        9641
      ]
    },
    {
      "content": "https://login.windows.net/common/",
      "pos": [
        9642,
        9675
      ]
    },
    {
      "content": "SkipBroker",
      "pos": [
        9680,
        9690
      ]
    },
    {
      "content": "Value indicating whether the company portal will be used as a broker.",
      "pos": [
        9693,
        9762
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>True<ept id=\"p1\">**</ept> – company portal will not be used for ADAL authentication.",
      "pos": [
        9774,
        9841
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>False<ept id=\"p1\">**</ept> – company portal will be used for ADAL authentication.",
      "pos": [
        9853,
        9917
      ]
    },
    {
      "content": "The company portal is using the enrolled user for Single Sign On purposes.",
      "pos": [
        9918,
        9992
      ]
    },
    {
      "content": "Non-Broker Redirect URI",
      "pos": [
        9998,
        10021
      ]
    },
    {
      "content": "Login URI to be used when ADAL does not use the broker app (Intune company portal).",
      "pos": [
        10024,
        10107
      ]
    },
    {
      "content": "urn:ietf:wg:oauth:2.0:oob",
      "pos": [
        10108,
        10133
      ]
    },
    {
      "content": "Resource ID",
      "pos": [
        10138,
        10149
      ]
    },
    {
      "content": "Pointer to the app's AAD resources.",
      "pos": [
        10152,
        10187
      ]
    },
    {
      "content": "https://intunemam.microsoftonline.com",
      "pos": [
        10188,
        10225
      ]
    },
    {
      "pos": [
        10232,
        10318
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"BKMK_AD\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Step 3: Configure access to mobile application management in AAD"
    },
    {
      "content": "Before you can use an app’s AAD registration values in the app wrapping tool, the application developer must grant that application access to the Intune Mobile Application Management resource by following these steps:",
      "pos": [
        10319,
        10536
      ]
    },
    {
      "content": "Log into an existing AAD account in the Azure management portal.",
      "pos": [
        10542,
        10606
      ]
    },
    {
      "pos": [
        10612,
        10660
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>existing LOB application registration<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        10666,
        10758
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>configure<ept id=\"p1\">**</ept> section, choose <bpt id=\"p2\">**</bpt>Configure Access to Web APIs in other applications<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        10764,
        10895
      ],
      "content": "From the first drop-down list in the <bpt id=\"p1\">**</bpt>Permission to other applications<ept id=\"p1\">**</ept> section, choose <bpt id=\"p2\">**</bpt>Intune Mobile Application Management<ept id=\"p2\">**</ept>."
    },
    {
      "content": "You can now use the app’s Client ID in the app wrapping tool.",
      "pos": [
        10897,
        10958
      ]
    },
    {
      "content": "You can find the Client ID in the Azure Active Directory management portal, as described in the table in <bpt id=\"p1\">[</bpt>Step 2: Review the identifiers that you need to get when you register the app<ept id=\"p1\">](#BKMK_review_IDs)</ept>.",
      "pos": [
        10959,
        11162
      ]
    },
    {
      "content": "Step 4: Use the AAD identifier values in the app wrapping tool",
      "pos": [
        11168,
        11230
      ]
    },
    {
      "content": "Using the identifier values that you got from the registration process, enter the values as command-line properties in the app wrapping tool.",
      "pos": [
        11231,
        11372
      ]
    },
    {
      "content": "You must specify all of the values in the table in order for end users to successfully authenticate the app.",
      "pos": [
        11373,
        11481
      ]
    },
    {
      "content": "Default values are used if you don't specify a value.",
      "pos": [
        11482,
        11535
      ]
    },
    {
      "content": "Identifier",
      "pos": [
        11538,
        11548
      ]
    },
    {
      "content": "Parameter",
      "pos": [
        11549,
        11558
      ]
    },
    {
      "content": "Client ID",
      "pos": [
        11592,
        11601
      ]
    },
    {
      "content": "ClientID",
      "pos": [
        11602,
        11610
      ]
    },
    {
      "content": "Authority URI",
      "pos": [
        11613,
        11626
      ]
    },
    {
      "content": "Authority-URI",
      "pos": [
        11627,
        11640
      ]
    },
    {
      "content": "SkipBroker",
      "pos": [
        11643,
        11653
      ]
    },
    {
      "content": "SkipBroker",
      "pos": [
        11654,
        11664
      ]
    },
    {
      "content": "Non-Broker Redirect URI",
      "pos": [
        11667,
        11690
      ]
    },
    {
      "content": "NonBrokerRedirectURI",
      "pos": [
        11691,
        11711
      ]
    },
    {
      "content": "Resource ID",
      "pos": [
        11714,
        11725
      ]
    },
    {
      "content": "ResourceID",
      "pos": [
        11726,
        11736
      ]
    },
    {
      "content": "Keep the following points in mind as you wrap your app:",
      "pos": [
        11738,
        11793
      ]
    },
    {
      "content": "The app wrapping tool does not search for ADAL binaries (if any) within the app.",
      "pos": [
        11799,
        11879
      ]
    },
    {
      "content": "If the app links to an outdated version of the binaries, runtime errors may occur during login if you enabled authentication policies.",
      "pos": [
        11880,
        12014
      ]
    },
    {
      "pos": [
        12020,
        12505
      ],
      "content": "To verify that the authentication was successful,\n                    [!INCLUDE[wit_nextref](../Token/wit_nextref_md.md)] fetches the AAD token that is associated with the MAM resource-id. However, the token is not used in any call that would in turn verify the validity of the token. [!INCLUDE[wit_nextref](../Token/wit_nextref_md.md)] only reads the user principal name (UPN) of the signed-in user to determine app access. The AAD token is not used for any further service calls.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "To verify that the authentication was successful,",
          "pos": [
            0,
            49
          ]
        },
        {
          "content": "                    [!INCLUDE[wit_nextref](../Token/wit_nextref_md.md)] fetches the AAD token that is associated with the MAM resource-id. However, the token is not used in any call that would in turn verify the validity of the token. [!INCLUDE[wit_nextref](../Token/wit_nextref_md.md)] only reads the user principal name (UPN) of the signed-in user to determine app access. The AAD token is not used for any further service calls.",
          "pos": [
            50,
            481
          ],
          "nodes": [
            {
              "content": "<ph id=\"ph1\">                    [!INCLUDE[wit_nextref](../Token/wit_nextref_md.md)]</ph> fetches the AAD token that is associated with the MAM resource-id.",
              "pos": [
                0,
                138
              ]
            },
            {
              "content": "However, the token is not used in any call that would in turn verify the validity of the token.",
              "pos": [
                139,
                234
              ]
            },
            {
              "content": "<ph id=\"ph1\">[!INCLUDE[wit_nextref](../Token/wit_nextref_md.md)]</ph> only reads the user principal name (UPN) of the signed-in user to determine app access.",
              "pos": [
                235,
                374
              ]
            },
            {
              "content": "The AAD token is not used for any further service calls.",
              "pos": [
                375,
                431
              ]
            }
          ]
        }
      ]
    },
    {
      "content": "Authentication tokens are shared between apps from the same publisher since they are stored in a shared keychain.",
      "pos": [
        12511,
        12624
      ]
    },
    {
      "content": "To isolate a specific app, use a different signing certificate, provisioning profile keystore, and key alias for that app.",
      "pos": [
        12625,
        12747
      ]
    },
    {
      "content": "Double login prompts are prevented if you provide your client application’s Client ID and Authority URI.",
      "pos": [
        12753,
        12857
      ]
    },
    {
      "content": "You need to register the Client ID to enable it to access the published <ph id=\"ph1\">[!INCLUDE[wit_nextref](../Token/wit_nextref_md.md)]</ph> MAM resource ID in the AAD Dashboard.",
      "pos": [
        12858,
        13019
      ]
    },
    {
      "content": "If you don't register the Client ID, users get a login failure when the app runs.",
      "pos": [
        13020,
        13101
      ]
    },
    {
      "content": "Next Steps",
      "pos": [
        13106,
        13116
      ]
    },
    {
      "pos": [
        13117,
        13309
      ],
      "content": "To learn more about how to deploy your wrapped apps, see <bpt id=\"p1\">[</bpt>Deploy apps to mobile devices in Microsoft Intune - deleted<ept id=\"p1\">](../Topic/Deploy-apps-to-mobile-devices-in-Microsoft-Intune---deleted.md)</ept>."
    },
    {
      "content": "See Also",
      "pos": [
        13314,
        13322
      ]
    },
    {
      "content": "Configure and deploy mobile application management policies in the Microsoft Intune console",
      "pos": [
        13324,
        13415
      ]
    }
  ],
  "content": "---\ntitle: MD Conversion - Prepare Android apps for mobile application management with the Microsoft Intune App Wrapping Tool\nms.custom: na\nms.reviewer: na\nms.suite: na\nms.tgt_pltfrm: na\nms.topic: article\nms.assetid: ab698da6-c09d-4826-b1aa-9f20d5867768\n---\n# MD Conversion - Prepare Android apps for mobile application management with the Microsoft Intune App Wrapping Tool\nUse the **Microsoft Intune App Wrapping Tool for Android** to modify the behavior of your in-house Android apps to let you configure features of the app without modifying the code of the app itself.\n\nThe tool is a Windows command line application that runs in PowerShell and creates a ‘wrapper’ around your app. Once the app is processed, you can then change the app’s functionality using an [!INCLUDE[wit_nextref](../Token/wit_nextref_md.md)] mobile application management policy (see [Configure and deploy mobile application management policies in the Microsoft Intune console](../Topic/Configure-and-deploy-mobile-application-management-policies-in-the-Microsoft-Intune-console.md)).\n\nIf your app is using the Azure Active Directory Authentication Library (ADAL), you must complete the steps in [How to wrap apps that use the Azure Active Directory Library (ADAL)](#BKMK_ADAL_android) before you wrap your app. If you are unsure if your app uses this library, contact the developer of the app.\n\nBefore running the tool, review the [Security considerations for running the app wrapping tool](../Topic/Prepare-Android-apps-for-mobile-application-management-with-the-Microsoft-Intune-App-Wrapping-Tool.md#BKMK_androidappwraptool). To download the tool, see [Microsoft Intune App Wrapping Tool for Android](http://www.microsoft.com/en-us/download/details.aspx?id=47267).\n\n## Step 1: Fulfill the prerequisites for using the app wrapping tool\n\n-   You must run the app wrapping tool on a Windows computer running Windows 7 or later.\n\n-   Your input app must be a valid Android application package with the extension **.apk** file and:\n\n    -   Cannot be encrypted\n\n    -   Must not have already been wrapped by the app wrapping tool\n\n    -   Must be written for Android 4.0 or later\n\n-   The app must be developed by, or for your company. You cannot use this tool to process apps downloaded from the Google Play Store.\n\n-   To run the app wrapping tool, you must install the latest version of the [Java Runtime Environment](http://java.com/download/) and then ensure that the Java path variable has been set to **C:\\ProgramData\\Oracle\\Java\\javapath** in your Windows environment variables. For more help, see your [Java documentation](http://java.com/download/help/).\n\n    > [!NOTE]\n    > In some cases, the 32-bit version of Java may result in memory issues. We recommend that you install the 64-bit version instead.\n\n## Step 2: Install the App Wrapping Tool\n\n#### Install the app wrapping tool\n\n1.  From the Microsoft Download Center, download and open the installation file for the app wrapping tool to a Windows computer.\n\n2.  Accept the license agreement, then complete the installation.\n\nNote the folder to which you installed the tool. The default location is: **C:\\Program Files (x86)\\Microsoft Intune Mobile Application Management\\Android\\App Wrapping Tool**.\n\n## Step 3: Run the App Wrapping Tool\n\n1.  On the Windows computer where you installed the app wrapping tool, open a PowerShell window.\n\n2.  From the folder where you installed the tool, import the app wrapping tool PowerShell module:\n\n    ```\n    Import-Module .\\IntuneAppWrappingTool.psm1\n    ```\n\n3.  Run the tool by using the **invoke-AppWrappingTool** command together with the following parameters. Parameters that are marked as \"optional\" are for apps that use Azure Active Directory Library (ADAL). For more information, see [How to wrap apps that use the Azure Active Directory Library (ADAL)](#BKMK_ADAL_android).\n\n    |Parameter|More information|\n    |-------------|--------------------|\n    |**-InputPath***&lt;String&gt;*|Path of the source Android app (.apk).|\n    |**-OutputPath***&lt;String&gt;*|Path to the \"output\" Android app. If this is the same directory path as InputPath, the packaging will fail.|\n    |**-KeyStorePath***&lt;String&gt;*|Path to the keystore file that contains the public/private key pair for signing.|\n    |**-KeyStorePassword***&lt;SecureString&gt;*|Password used to decrypt the keystore.|\n    |**-KeyAlias***&lt;String&gt;*|Name of the key to be used for signing.|\n    |**-KeyPassword***&lt;SecureString&gt;*|Password used to decrypt the private key that will be used for signing.|\n    |**-SigAlg***&lt;SecureString&gt;*|Name of the signature algorithm to be used for signing. The algorithm must be compatible with the private key.<br /><br />Examples: SHA256withRSA, SHA1withRSA, MD5withRSA|\n    |**-ClientID***&lt;GUID&gt;*|Azure Active Directory Client ID of the input app (optional).|\n    |**-AuthorityURI***&lt;Uri&gt;*|Azure Active Directory Authority URI of the input app (optional).|\n    |**-SkipBroker***&lt;Boolean&gt;*|Indicates whether the input application supports device-wide brokered single sign-on (optional).<br /><br />**True** - the input application does not support device-wide brokered single sign-on. Use the NonBrokerRedirectURI parameter.<br /><br />**False** - the input application supports device-wide brokered single sign-on|\n    |**-NonBrokerRedirectURI***&lt;URI&gt;*|Azure Active Directory Redirect URI to use if SkipBroker is true (optional).|\n    |*&lt;CommonParameters&gt;*|(optional – supports common PowerShell parameters such as verbose, debug, etc.)<br /><br />For a list of common parameters, see the [Microsoft Script Center](https://technet.microsoft.com/library/hh847884.aspx).|\n    To see help for the tool, enter the command:\n\n    ```\n    Help Invoke-AppWrappingTool\n    ```\n    To find out more about Azure Active Directory (AAD) integration, see [here](https://technet.microsoft.com/library/dn878028.aspx).\n\n    **Example:**\n\n    ```\n    Import-Module \"C:\\Program Files (x86)\\Microsoft Intune Mobile Application Management\\Android\\App Wrapping Tool\\IntuneAppWrappingTool.psm1\"\n    Invoke-AppWrappingTool –InputPath <input-app.apk> -OutputPath <output-app.apk> -KeyStorePath <path-to-signing.keystore> -KeyAlias <signing-key-name> -ClientID <xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx> -AuthorityURI <http://AzureActivieDirectory.Authority.URL> -SkipBroker<$True|$False> -NonBrokerRedirectURI <urn:xxx:xx:xxxx:xx:xxx>\n    ```\n    You will then be prompted for the **KeyStorePassword** and **KeyPassword**.\n\nThe wrapped app is generated, and saved, along with a log file, in the output path you specified.\n\n## <a name=\"BKMK_androidappwraptool\"></a>Security considerations for running the app wrapping tool\nTo prevent potential spoofing, information disclosure, and elevation of privilege attacks:\n\n-   Ensure that the input line-of-business application, output application, and Java KeyStore are on the same computer where the app wrapping tool is running.\n\n-   Import the output application to the Intune Console on the same computer where the tool is running.\n\n-   If the output application and the tool are on a Universal Naming Convention (UNC) path and you are not running the tool and input files on the same computer, configure the environment to be secure by using [Internet Protocol Security (IPsec)](http://en.wikipedia.org/wiki/IPsec) or [Server Message Block (SMB) signing](https://support.microsoft.com/en-us/kb/887429).\n\n-   Ensure that the application is coming from a trusted source, especially if you are using Azure Active Directory (AAD), which might enable the application to access the AAD token during runtime.\n\n-   Secure the output directory that contains the wrapped app. Consider using a user-level directory for the output.\n\n## <a name=\"BKMK_ADAL_android\"></a>How to wrap apps that use the Azure Active Directory Library (ADAL)\nIf your app is using the Azure Active Directory Authentication Library (ADAL), you must complete these steps before you wrap your app.\n\n### Step 1: Ensure that you meet the requirements for ADAL\nFor apps that use ADAL, the following must be true:\n\n-   The app must incorporate an ADAL version greater than or equal to 1.0.2.\n\n-   The developer must [grant their app access to the Intune Mobile Application Management resource](../Topic/Prepare-iOS-apps-for-mobile-application-management-with-the-Microsoft-Intune-App-Wrapping-Tool.md#BKMK_AD).\n\n### <a name=\"BKMK_review_IDs\"></a>Step 2: Review the identifiers that you need to get when you register the app\nIn the next step, you will use the Azure management portal to register your apps (which are using  ADAL with Azure Active Directory (AAD)) to get the unique identifiers listed in the following table. You then give the identifiers to the developer when you integrate ADAL with the app. For more information about these identifier values, see [Microsoft Azure Active Directory Authentication Library (ADAL) for Android](https://github.com/AzureAD/azure-activedirectory-library-for-android/blob/master/README.md).\n\n|Identifier|More information|Default value|\n|--------------|--------------------|-----------------|\n|**Client ID**|A unique GUID identifier that is generated for the app after it is registered with AAD.<br /><br />If you know the app's Client ID, specify that value. Otherwise, use the default value.|6c7e8096-f593-4d72-807f-a5f86dcc9c77|\n|**Authority URI**|The authority Uniform Resource Identifier (URI) value for AAD) objects (for example, users and groups).<br /><br />The AuthorityURI parameter is optional for the app wrapping tool. The default URI is used if you don't use the parameter.|https://login.windows.net/common/|\n|**SkipBroker**|Value indicating whether the company portal will be used as a broker.<br /><br />**True** – company portal will not be used for ADAL authentication.<br /><br />**False** – company portal will be used for ADAL authentication. The company portal is using the enrolled user for Single Sign On purposes.||\n|**Non-Broker Redirect URI**|Login URI to be used when ADAL does not use the broker app (Intune company portal).|urn:ietf:wg:oauth:2.0:oob|\n|**Resource ID**|Pointer to the app's AAD resources.|https://intunemam.microsoftonline.com|\n\n### <a name=\"BKMK_AD\"></a>Step 3: Configure access to mobile application management in AAD\nBefore you can use an app’s AAD registration values in the app wrapping tool, the application developer must grant that application access to the Intune Mobile Application Management resource by following these steps:\n\n1.  Log into an existing AAD account in the Azure management portal.\n\n2.  Click **existing LOB application registration**.\n\n3.  In the **configure** section, choose **Configure Access to Web APIs in other applications**.\n\n4.  From the first drop-down list in the **Permission to other applications** section, choose **Intune Mobile Application Management**.\n\nYou can now use the app’s Client ID in the app wrapping tool. You can find the Client ID in the Azure Active Directory management portal, as described in the table in [Step 2: Review the identifiers that you need to get when you register the app](#BKMK_review_IDs).\n\n### Step 4: Use the AAD identifier values in the app wrapping tool\nUsing the identifier values that you got from the registration process, enter the values as command-line properties in the app wrapping tool. You must specify all of the values in the table in order for end users to successfully authenticate the app. Default values are used if you don't specify a value.\n\n|Identifier|Parameter|\n|--------------|-------------|\n|Client ID|ClientID|\n|Authority URI|Authority-URI|\n|SkipBroker|SkipBroker|\n|Non-Broker Redirect URI|NonBrokerRedirectURI|\n|Resource ID|ResourceID|\nKeep the following points in mind as you wrap your app:\n\n-   The app wrapping tool does not search for ADAL binaries (if any) within the app. If the app links to an outdated version of the binaries, runtime errors may occur during login if you enabled authentication policies.\n\n-   To verify that the authentication was successful,\n                        [!INCLUDE[wit_nextref](../Token/wit_nextref_md.md)] fetches the AAD token that is associated with the MAM resource-id. However, the token is not used in any call that would in turn verify the validity of the token. [!INCLUDE[wit_nextref](../Token/wit_nextref_md.md)] only reads the user principal name (UPN) of the signed-in user to determine app access. The AAD token is not used for any further service calls.\n\n-   Authentication tokens are shared between apps from the same publisher since they are stored in a shared keychain. To isolate a specific app, use a different signing certificate, provisioning profile keystore, and key alias for that app.\n\n-   Double login prompts are prevented if you provide your client application’s Client ID and Authority URI. You need to register the Client ID to enable it to access the published [!INCLUDE[wit_nextref](../Token/wit_nextref_md.md)] MAM resource ID in the AAD Dashboard. If you don't register the Client ID, users get a login failure when the app runs.\n\n## Next Steps\nTo learn more about how to deploy your wrapped apps, see [Deploy apps to mobile devices in Microsoft Intune - deleted](../Topic/Deploy-apps-to-mobile-devices-in-Microsoft-Intune---deleted.md).\n\n## See Also\n[Configure and deploy mobile application management policies in the Microsoft Intune console](../Topic/Configure-and-deploy-mobile-application-management-policies-in-the-Microsoft-Intune-console.md)\n\n"
}